## ðŸ§ users.models.UserProfile

Ð Ð°ÑÑˆÐ¸Ñ€ÑÐµÑ‚ Ð±Ð°Ð·Ð¾Ð²ÑƒÑŽ Ð¼Ð¾Ð´ÐµÐ»ÑŒ `User` Ñ‡ÐµÑ€ÐµÐ· `OneToOneField`.

| ÐŸÐ¾Ð»Ðµ                  | Ð¢Ð¸Ð¿                     | ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ                                         |
|-----------------------|--------------------------|----------------------------------------------------|
| `user`                | OneToOneField(User)      | Ð¡Ð²ÑÐ·ÑŒ Ñ `User`, 1 Ðº 1                              |
| `telegram_chat_id`    | CharField(max_length=50) | Telegram chat ID                                   |
| `telegram_username`   | CharField(max_length=50) | Telegram username                                  |
| `is_telegram_verified`| BooleanField             | ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´Ñ‘Ð½ Ð»Ð¸ Telegram                            |
| `telegram_verified_at`| DateTimeField            | Ð’Ñ€ÐµÐ¼Ñ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ Telegram                       |
| `phone`               | CharField(max_length=20) | Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ                               |

### ðŸ” ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»Ñ

Ð’ ```users/signals.py``` Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½ ÑÐ¸Ð³Ð½Ð°Ð»:

```
@receiver(post_save, sender=User)
def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.get_or_create(user=instance)
```    
---

## ðŸŽ« events.models.Event

ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ ÑÑƒÑ‰Ð½Ð¾ÑÑ‚ÑŒ: Ð¼ÐµÑ€Ð¾Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ðµ.

| ÐŸÐ¾Ð»Ðµ             | Ð¢Ð¸Ð¿                              | ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ                                       |
|------------------|-----------------------------------|--------------------------------------------------|
| `title`          | CharField(max_length=200)         | ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¼ÐµÑ€Ð¾Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ñ                             |
| `description`    | TextField                         | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ                                         |
| `event_date`     | DateField                         | Ð”Ð°Ñ‚Ð° Ð¿Ñ€Ð¾Ð²ÐµÐ´ÐµÐ½Ð¸Ñ                                  |
| `start_time`     | TimeField (nullable)              | Ð’Ñ€ÐµÐ¼Ñ Ð½Ð°Ñ‡Ð°Ð»Ð°                                     |
| `location`       | CharField(max_length=200)         | ÐœÐµÑÑ‚Ð¾ Ð¿Ñ€Ð¾Ð²ÐµÐ´ÐµÐ½Ð¸Ñ                                 |
| `city`           | ForeignKey(City, null=True)       | Ð“Ð¾Ñ€Ð¾Ð´                                            |
| `genre`          | ForeignKey(Genre, null=True)      | Ð–Ð°Ð½Ñ€/ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ                                   |
| `ticket_price`   | DecimalField(max_digits=10, ...)  | Ð¡Ñ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð±Ð¸Ð»ÐµÑ‚Ð°                                 |
| `available_tickets`| PositiveIntegerField            | Ð”Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ðµ Ð±Ð¸Ð»ÐµÑ‚Ñ‹                                 |
| `image`          | ImageField (nullable)             | Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¼ÐµÑ€Ð¾Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ñ                          |
| `rules`          | TextField (nullable)              | ÐŸÑ€Ð°Ð²Ð¸Ð»Ð° Ð¿Ð¾ÑÐµÑ‰ÐµÐ½Ð¸Ñ                                |
| `event_url`      | URLField (nullable)               | Ð¡ÑÑ‹Ð»ÐºÐ° Ð½Ð° ÑÐ°Ð¹Ñ‚ Ð¼ÐµÑ€Ð¾Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ñ                       |
| `source`         | CharField(max_length=50)          | Ð˜Ð¼Ñ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ° (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, 'import')               |
| `is_imported`    | BooleanField                      | Ð¤Ð»Ð°Ð³, Ð±Ñ‹Ð»Ð¾ Ð»Ð¸ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾                      |

---

## ðŸŽ­ events.models.Genre

| ÐŸÐ¾Ð»Ðµ   | Ð¢Ð¸Ð¿                        | ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ              |
|--------|-----------------------------|--------------------------|
| `name`| CharField(unique=True)     | ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¶Ð°Ð½Ñ€Ð°/ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ |

---

## ðŸ™ events.models.City

| ÐŸÐ¾Ð»Ðµ   | Ð¢Ð¸Ð¿                        | ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ        |
|--------|-----------------------------|--------------------|
| `name`| CharField(unique=True)     | ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð³Ð¾Ñ€Ð¾Ð´Ð°    |

---

## ðŸ“¥ event_importer.models.EventSource

ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº Ð´Ð»Ñ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð° Ð¼ÐµÑ€Ð¾Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ð¹.

| ÐŸÐ¾Ð»Ðµ         | Ð¢Ð¸Ð¿                   | ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ                     |
|--------------|------------------------|--------------------------------|
| `name`       | CharField              | ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ°             |
| `source_type`| CharField              | Ð¢Ð¸Ð¿ (rss, api, html)           |
| `url`        | URLField               | Ð¡ÑÑ‹Ð»ÐºÐ° Ð½Ð° Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº             |
| `last_checked`| DateTimeField (null) | Ð”Ð°Ñ‚Ð° Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ¹ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸        |

---

## ðŸ“„ event_importer.models.ImportLog

Ð›Ð¾Ð³Ð¸Ñ€ÑƒÐµÑ‚ Ð²ÑÐµ Ð¿Ð¾Ð¿Ñ‹Ñ‚ÐºÐ¸ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð°.

| ÐŸÐ¾Ð»Ðµ          | Ð¢Ð¸Ð¿                         | ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ                      |
|---------------|------------------------------|---------------------------------|
| `source`      | ForeignKey(EventSource)      | ÐžÑ‚ÐºÑƒÐ´Ð° Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚                   |
| `raw_data`    | TextField                    | Ð¡Ñ‹Ñ€Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ (HTML, XML, JSON)  |
| `status`      | CharField                    | Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ('success', 'fail')      |
| `error_message`| TextField (nullable)        | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ (ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ)     |
| `timestamp`   | DateTimeField(auto_now_add)  | Ð’Ñ€ÐµÐ¼Ñ Ð¿Ð¾Ð¿Ñ‹Ñ‚ÐºÐ¸ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð°           |

---

## ðŸ§¾ booking.models.BookingStatus (Enum)

Choice-Ð½Ð°Ð±Ð¾Ñ€ ÑÑ‚Ð°Ñ‚ÑƒÑÐ¾Ð² Ð±Ñ€Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ:
- `BOOKED` â€” Ð—Ð°Ð±Ñ€Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾
- `CONFIRMED` â€” ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¾
- `CANCELLED` â€” ÐžÑ‚Ð¼ÐµÐ½ÐµÐ½Ð¾

---

## ðŸŽŸ booking.models.Booking

Ð¥Ñ€Ð°Ð½Ð¸Ñ‚ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð¾ Ð±Ñ€Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸ Ð¼ÐµÑ€Ð¾Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ñ.

| ÐŸÐ¾Ð»Ðµ          | Ð¢Ð¸Ð¿                                 | ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ                                        |
|---------------|--------------------------------------|---------------------------------------------------|
| `user`        | ForeignKey(User)                    | ÐšÑ‚Ð¾ Ð±Ñ€Ð¾Ð½Ð¸Ñ€ÑƒÐµÑ‚                                     |
| `event`       | ForeignKey(Event)                   | ÐšÐ°ÐºÐ¾Ðµ Ð¼ÐµÑ€Ð¾Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ðµ                                 |
| `booking_date`| DateTimeField(auto_now_add=True)    | ÐšÐ¾Ð³Ð´Ð° Ð±Ñ‹Ð»Ð¾ Ð·Ð°Ð±Ñ€Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾                          |
| `status`      | CharField(choices=BookingStatus)    | Ð¢ÐµÐºÑƒÑ‰Ð¸Ð¹ ÑÑ‚Ð°Ñ‚ÑƒÑ Ð±Ñ€Ð¾Ð½Ð¸                              |
| `is_confirmed`| BooleanField                        | Ð¤Ð»Ð°Ð³ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ (ÐµÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð¾)                   |

**Constraints:**
- `unique_together = ('user', 'event')` â€” Ð½ÐµÐ»ÑŒÐ·Ñ Ð·Ð°Ð±Ñ€Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¾Ð´Ð½Ð¾ Ð¼ÐµÑ€Ð¾Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ðµ Ð´Ð²Ð°Ð¶Ð´Ñ‹.

---

## ðŸ“Š Ð’Ð¸Ð·ÑƒÐ°Ð»ÑŒÐ½Ð°Ñ ÑÑ…ÐµÐ¼Ð° ÑÐ²ÑÐ·ÐµÐ¹:

- `User â†” UserProfile` â€” OneToOne
- `User â†” Booking` â€” OneToMany
- `Event â†” Booking` â€” OneToMany
- `Event â†” Genre`, `Event â†” City` â€” ForeignKey
- `EventSource â†” ImportLog` â€” OneToMany

---

## âš  Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ñ‹Ðµ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ Ð¸ Ñ€Ð¸ÑÐºÐ¸:

- `Booking` Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð·Ð°Ñ‰Ð¸Ñ‰Ñ‘Ð½ Ð¾Ñ‚ Ð³Ð¾Ð½Ð¾Ðº Ð´Ð°Ð½Ð½Ñ‹Ñ… (`select_for_update`)
- `available_tickets` Ð½ÑƒÐ¶Ð½Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÑ‚ÑŒ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ð¾ Ð¸Ð»Ð¸ ÑÑ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ Ð´Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸
- ÐÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð»Ð¾Ð³Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¾Ð² Ð´Ð»Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸
- QR-Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ðµ Telegram â€” Ð¿Ð¾Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð´Ð¾Ð¿. Ð¿Ð¾Ð»ÐµÐ¹ Ð² `UserProfile`

---

## ðŸ”„ Ð¡Ð²ÑÐ·Ð¸ Ð¼ÐµÐ¶Ð´Ñƒ Ð¼Ð¾Ð´ÐµÐ»ÑÐ¼Ð¸ â€” ÑÑ…ÐµÐ¼Ð°:
```
User â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> UserProfile
         â””â”€<bookings>â”€â”€ Booking â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> Event â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€> Genre
                                                         â””â”€â”€> City

Event <â”€â”€â”€â”€ imported from â”€â”€â”€ EventSource
EventSource â”€â”€â”€â”€<logs>â”€â”€â”€â”€ ImportLog
```